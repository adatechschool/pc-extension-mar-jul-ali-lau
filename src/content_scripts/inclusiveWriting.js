console.log("inclusive");
let dictionaryIncl = new Map();
dictionaryIncl.set("de nombreux", "de multiples");
dictionaryIncl.set("de nombreuses", "de multiples");
dictionaryIncl.set("les droits de l'Homme", "les droits humains");
dictionaryIncl.set("homme politique", "personnalité politique");
dictionaryIncl.set("celui qui", "quiconque");
dictionaryIncl.set("Madame le préfet", "Madame la préfète");
dictionaryIncl.set("Madame le directeur", "Madame la directrice");
dictionaryIncl.set("Madame le sénateur", "Madame la sénatrice");
dictionaryIncl.set("Madame le maire", "Madame la maire");
dictionaryIncl.set("femme de ménage", "personnel d'entretien");
dictionaryIncl.set("mademoiselle", "madame");
dictionaryIncl.set("il", "iel");
dictionaryIncl.set("elle", "iel");
dictionaryIncl.set("ils", "iels");
dictionaryIncl.set("elles", "iels");
dictionaryIncl.set("les sénateurs", "les membres du sénat");
dictionaryIncl.set("les parlementaires", "les membres du parlement");
dictionaryIncl.set("à la satisfaction de tous", "à la satisfaction générale");
dictionaryIncl.set("a été violée", "a été victime d'un viol");
dictionaryIncl.set("abus sexuel", "agression sexuelle");
dictionaryIncl.set("attouchement sexuel", "agression sexuelle");
dictionaryIncl.set("pour tous", "pour tout le monde");
dictionaryIncl.set("à tous", "à tout le monde");
dictionaryIncl.set("acheteur", "acheteur.euse");
dictionaryIncl.set("acteur", "acteur.rice");
dictionaryIncl.set("adhérent", "adhérent.e");
dictionaryIncl.set("adjoint", "adjoint.e");
dictionaryIncl.set("administrateur", "administrateur.rice");
dictionaryIncl.set("administré", "administré.e");
dictionaryIncl.set("agent", "agent.e");
dictionaryIncl.set("agriculteur", "agriculteur.rice");
dictionaryIncl.set("ambassadeur", "ambassadeur.rice");
dictionaryIncl.set("animateur", "animateur.rice");
dictionaryIncl.set("apprenti", "apprenti.e");
dictionaryIncl.set("artisan", "artisan.e");
dictionaryIncl.set("assistant", "assistant.e");
dictionaryIncl.set("attaché", "attaché.e");
dictionaryIncl.set("auteur", "auteur.rice");
dictionaryIncl.set("avocat", "avocat.e");
dictionaryIncl.set("banquier", "banquier.ère");
dictionaryIncl.set("chargé", "chargé.e");
dictionaryIncl.set("chef", "chef.fe");
dictionaryIncl.set("chercheur", "chercheur.e");
dictionaryIncl.set("chroniqueur", "chroniqueur.euse");
dictionaryIncl.set("citoyen", "citoyen.ne");
dictionaryIncl.set("commis", "commis.e");
dictionaryIncl.set("conseiller", "conseiller.ère");
dictionaryIncl.set("consommateur", "consommateur.rice");
dictionaryIncl.set("consultant", "consultant.e");
dictionaryIncl.set("délégué", "délégué.e");
dictionaryIncl.set("député", "député.e");
dictionaryIncl.set("diplômé", "diplômé.e");
dictionaryIncl.set("directeur", "directeur.rice");
dictionaryIncl.set("écolier", "écolier.ère");
dictionaryIncl.set("éducateur", "éducateur.rice");
dictionaryIncl.set("électeur", "électeur.rice");
dictionaryIncl.set("élu", "élu.e");
dictionaryIncl.set("entraineur", "entraineur.euse");
dictionaryIncl.set("entrepreneur", "entrepreneur.e");
dictionaryIncl.set("étudiant", "étudiant.e");
dictionaryIncl.set("footballeur", "footballeur.euse");
dictionaryIncl.set("gardien", "gardien.ne");
dictionaryIncl.set("gouverneur", "gouverneur.e");
dictionaryIncl.set("habitant", "habitant.e");
dictionaryIncl.set("hospitalier", "hospitalier.ère");
dictionaryIncl.set("ingénieur", "ingénieur.e");
dictionaryIncl.set("inspecteur", "inspecteur.rice");
dictionaryIncl.set("instituteur", "instituteur.rice");
dictionaryIncl.set("intellectuel", "intellectuel.le");
dictionaryIncl.set("lycéen", "lycéen.ne");
dictionaryIncl.set("médiateur", "médiateur.rice");
dictionaryIncl.set("modérateur", "modérateur.rice");
dictionaryIncl.set("officier", "officier.ère");
dictionaryIncl.set("policier", "policier.ère");
dictionaryIncl.set("président", "président.e");
dictionaryIncl.set("professeur", "professeur.e");
dictionaryIncl.set("professionnel", "professionnel.le");
dictionaryIncl.set("programmeur", "programmeur.euse");
dictionaryIncl.set("recteur", "recteur.rice");
dictionaryIncl.set("remplaçant", "remplaçant.e");
dictionaryIncl.set("retraité", "retraité.e");
dictionaryIncl.set("sénateur", "sénateur.rice");
dictionaryIncl.set("sénior", "sénior.e");
dictionaryIncl.set("sportif", "sportif.ve");
dictionaryIncl.set("suppléant", "suppléant.e");
dictionaryIncl.set("technicien", "technicien.ne");
dictionaryIncl.set("territorial", "territorial.e");
dictionaryIncl.set("transporteur", "transporteur.euse");
dictionaryIncl.set("travailleur", "travailleur.euse");
dictionaryIncl.set("usager", "usager.ère");
dictionaryIncl.set("développeur", "développeur.euse");
dictionaryIncl.set("acheteurs", "acheteur.euse.s");
dictionaryIncl.set("acteurs", "acteur.rice.s");
dictionaryIncl.set("adhérents", "adhérent.e.s");
dictionaryIncl.set("adjoints", "adjoint.e.s");
dictionaryIncl.set("administrateurs", "administrateur.rice.s");
dictionaryIncl.set("administrés", "administré.e.s");
dictionaryIncl.set("agents", "agent.e.s");
dictionaryIncl.set("agriculteurs", "agriculteur.rice.s");
dictionaryIncl.set("ambassadeurs", "ambassadeur.rice.s");
dictionaryIncl.set("animateurs", "animateur.rice.s");
dictionaryIncl.set("apprentis", "apprenti.e.s");
dictionaryIncl.set("artisans", "artisan.e.s");
dictionaryIncl.set("assistants", "assistant.e.s");
dictionaryIncl.set("attachés", "attaché.e.s");
dictionaryIncl.set("auteurs", "auteur.rice.s");
dictionaryIncl.set("avocats", "avocat.e.s");
dictionaryIncl.set("banquiers", "banquier.ère.s");
dictionaryIncl.set("chargés", "chargé.e.s");
dictionaryIncl.set("chefs", "chef.fe.s");
dictionaryIncl.set("chercheurs", "chercheur.e.s");
dictionaryIncl.set("chroniqueurs", "chroniqueur.euse.s");
dictionaryIncl.set("citoyens", "citoyen.ne.s");
dictionaryIncl.set("commis", "commis.e.s");
dictionaryIncl.set("conseillers", "conseiller.ère.s");
dictionaryIncl.set("consommateurs", "consommateur.rice.s");
dictionaryIncl.set("consultants", "consultant.e.s");
dictionaryIncl.set("délégués", "délégué.e.s");
dictionaryIncl.set("députés", "député.e.s");
dictionaryIncl.set("diplômés", "diplômé.e.s");
dictionaryIncl.set("directeurs", "directeur.rice.s");
dictionaryIncl.set("écoliers", "écolier.ère.s");
dictionaryIncl.set("éducateurs", "éducateur.rice.s");
dictionaryIncl.set("électeurs", "électeur.rice.s");
dictionaryIncl.set("élus", "élu.e.s");
dictionaryIncl.set("entraineurs", "entraineur.euse.s");
dictionaryIncl.set("entrepreneurs", "entrepreneur.e.s");
dictionaryIncl.set("étudiants", "étudiant.e.s");
dictionaryIncl.set("footballeurs", "footballeur.euse.s");
dictionaryIncl.set("gardiens", "gardien.ne.s");
dictionaryIncl.set("gouverneurs", "gouverneur.e.s");
dictionaryIncl.set("habitants", "habitant.e.s");
dictionaryIncl.set("hospitaliers", "hospitalier.ère.s");
dictionaryIncl.set("ingénieurs", "ingénieur.e.s");
dictionaryIncl.set("inspecteurs", "inspecteur.rice.s");
dictionaryIncl.set("instituteurs", "instituteur.rice.s");
dictionaryIncl.set("intellectuels", "intellectuel.le.s");
dictionaryIncl.set("lycéens", "lycéen.ne.s");
dictionaryIncl.set("médiateurs", "médiateur.rice.s");
dictionaryIncl.set("modérateurs", "modérateur.rice.s");
dictionaryIncl.set("officiers", "officier.ère.s");
dictionaryIncl.set("policiers", "policier.ère.s");
dictionaryIncl.set("présidents", "président.e.s");
dictionaryIncl.set("professeurs", "professeur.e.s");
dictionaryIncl.set("professionnels", "professionnel.le.s");
dictionaryIncl.set("programmeurs", "programmeur.euse.s");
dictionaryIncl.set("recteurs", "recteur.rice.s");
dictionaryIncl.set("remplaçants", "remplaçant.e.s");
dictionaryIncl.set("retraités", "retraité.e.s");
dictionaryIncl.set("sénateurs", "sénateur.rice.s");
dictionaryIncl.set("séniors", "sénior.e.s");
dictionaryIncl.set("sportifs", "sportif.ive.s");
dictionaryIncl.set("suppléants", "suppléant.e.s");
dictionaryIncl.set("techniciens", "technicien.ne.s");
dictionaryIncl.set("territorials", "territorial.e.s");
dictionaryIncl.set("transporteurs", "transporteur.euse.s");
dictionaryIncl.set("travailleurs", "travailleur.euse.s");
dictionaryIncl.set("usagers", "usager.ère.s");
dictionaryIncl.set("utilisateurs", "utilisateur.rice.s");
dictionaryIncl.set("développeurs", "développeur.euse.s");

// let dictionaryIncl = new Map();
// dictionary.set("de nombreux", "de multiples");
// dictionary.set("de nombreuses", "de multiples");
// dictionary.set("les droits de l'Homme", "les droits humains");
// dictionary.set("homme politique", "personnalité politique");
// dictionary.set("celui qui", "quiconque");
// dictionary.set("Madame le préfet", "Madame la préfète");
// dictionary.set("Madame le directeur", "Madame la directrice");
// dictionary.set("Madame le sénateur", "Madame la sénatrice");
// dictionary.set("Madame le maire", "Madame la maire");
// dictionary.set("femme de ménage", "personnel d'entretien");
// dictionary.set("mademoiselle", "madame");
// dictionary.set("il", "iel");
// dictionary.set("elle", "iel");
// dictionary.set("ils", "iels");
// dictionary.set("elles", "iels");
// dictionary.set("les sénateurs", "les membres du sénat");
// dictionary.set("les parlementaires", "les membres du parlement");
// dictionary.set("à la satisfaction de tous", "à la satisfaction générale");
// dictionary.set("a été violée", "a été victime d'un viol");
// dictionary.set("abus sexuel", "agression sexuelle");
// dictionary.set("attouchement sexuel", "agression sexuelle");
// dictionary.set("pour tous", "pour tout le monde");
// dictionary.set("à tous", "à tout le monde");
// dictionary.set("acheteur", "acheteur.euse");
// dictionary.set("acteur", "acteur.rice");
// dictionary.set("adhérent", "adhérent.e");
// dictionary.set("adjoint", "adjoint.e");
// dictionary.set("administrateur", "administrateur.rice");
// dictionary.set("administré", "administré.e");
// dictionary.set("agent", "agent.e");
// dictionary.set("agriculteur", "agriculteur.rice");
// dictionary.set("ambassadeur", "ambassadeur.rice");
// dictionary.set("animateur", "animateur.rice");
// dictionary.set("apprenti", "apprenti.e");
// dictionary.set("artisan", "artisan.e");
// dictionary.set("assistant", "assistant.e");
// dictionary.set("attaché", "attaché.e");
// dictionary.set("auteur", "auteur.rice");
// dictionary.set("avocat", "avocat.e");
// dictionary.set("banquier", "banquier.ère");
// dictionary.set("chargé", "chargé.e");
// dictionary.set("chef", "chef.fe");
// dictionary.set("chercheur", "chercheur.e");
// dictionary.set("chroniqueur", "chroniqueur.euse");
// dictionary.set("citoyen", "citoyen.ne");
// dictionary.set("commis", "commis.e");
// dictionary.set("conseiller", "conseiller.ère");
// dictionary.set("consommateur", "consommateur.rice");
// dictionary.set("consultant", "consultant.e");
// dictionary.set("délégué", "délégué.e");
// dictionary.set("député", "député.e");
// dictionary.set("diplômé", "diplômé.e");
// dictionary.set("directeur", "directeur.rice");
// dictionary.set("écolier", "écolier.ère");
// dictionary.set("éducateur", "éducateur.rice");
// dictionary.set("électeur", "électeur.rice");
// dictionary.set("élu", "élu.e");
// dictionary.set("entraineur", "entraineur.euse");
// dictionary.set("entrepreneur", "entrepreneur.e");
// dictionary.set("étudiant", "étudiant.e");
// dictionary.set("footballeur", "footballeur.euse");
// dictionary.set("gardien", "gardien.ne");
// dictionary.set("gouverneur", "gouverneur.e");
// dictionary.set("habitant", "habitant.e");
// dictionary.set("hospitalier", "hospitalier.ère");
// dictionary.set("ingénieur", "ingénieur.e");
// dictionary.set("inspecteur", "inspecteur.rice");
// dictionary.set("instituteur", "instituteur.rice");
// dictionary.set("intellectuel", "intellectuel.le");
// dictionary.set("lycéen", "lycéen.ne");
// dictionary.set("médiateur", "médiateur.rice");
// dictionary.set("modérateur", "modérateur.rice");
// dictionary.set("officier", "officier.ère");
// dictionary.set("policier", "policier.ère");
// dictionary.set("président", "président.e");
// dictionary.set("professeur", "professeur.e");
// dictionary.set("professionnel", "professionnel.le");
// dictionary.set("programmeur", "programmeur.euse");
// dictionary.set("recteur", "recteur.rice");
// dictionary.set("remplaçant", "remplaçant.e");
// dictionary.set("retraité", "retraité.e");
// dictionary.set("sénateur", "sénateur.rice");
// dictionary.set("sénior", "sénior.e");
// dictionary.set("sportif", "sportif.ve");
// dictionary.set("suppléant", "suppléant.e");
// dictionary.set("technicien", "technicien.ne");
// dictionary.set("territorial", "territorial.e");
// dictionary.set("transporteur", "transporteur.euse");
// dictionary.set("travailleur", "travailleur.euse");
// dictionary.set("usager", "usager.ère");
// dictionary.set("développeur", "développeur.euse");
// dictionary.set("acheteurs", "acheteur.euse.s");
// dictionary.set("acteurs", "acteur.rice.s");
// dictionary.set("adhérents", "adhérent.e.s");
// dictionary.set("adjoints", "adjoint.e.s");
// dictionary.set("administrateurs", "administrateur.rice.s");
// dictionary.set("administrés", "administré.e.s");
// dictionary.set("agents", "agent.e.s");
// dictionary.set("agriculteurs", "agriculteur.rice.s");
// dictionary.set("ambassadeurs", "ambassadeur.rice.s");
// dictionary.set("animateurs", "animateur.rice.s");
// dictionary.set("apprentis", "apprenti.e.s");
// dictionary.set("artisans", "artisan.e.s");
// dictionary.set("assistants", "assistant.e.s");
// dictionary.set("attachés", "attaché.e.s");
// dictionary.set("auteurs", "auteur.rice.s");
// dictionary.set("avocats", "avocat.e.s");
// dictionary.set("banquiers", "banquier.ère.s");
// dictionary.set("chargés", "chargé.e.s");
// dictionary.set("chefs", "chef.fe.s");
// dictionary.set("chercheurs", "chercheur.e.s");
// dictionary.set("chroniqueurs", "chroniqueur.euse.s");
// dictionary.set("citoyens", "citoyen.ne.s");
// dictionary.set("commis", "commis.e.s");
// dictionary.set("conseillers", "conseiller.ère.s");
// dictionary.set("consommateurs", "consommateur.rice.s");
// dictionary.set("consultants", "consultant.e.s");
// dictionary.set("délégués", "délégué.e.s");
// dictionary.set("députés", "député.e.s");
// dictionary.set("diplômés", "diplômé.e.s");
// dictionary.set("directeurs", "directeur.rice.s");
// dictionary.set("écoliers", "écolier.ère.s");
// dictionary.set("éducateurs", "éducateur.rice.s");
// dictionary.set("électeurs", "électeur.rice.s");
// dictionary.set("élus", "élu.e.s");
// dictionary.set("entraineurs", "entraineur.euse.s");
// dictionary.set("entrepreneurs", "entrepreneur.e.s");
// dictionary.set("étudiants", "étudiant.e.s");
// dictionary.set("footballeurs", "footballeur.euse.s");
// dictionary.set("gardiens", "gardien.ne.s");
// dictionary.set("gouverneurs", "gouverneur.e.s");
// dictionary.set("habitants", "habitant.e.s");
// dictionary.set("hospitaliers", "hospitalier.ère.s");
// dictionary.set("ingénieurs", "ingénieur.e.s");
// dictionary.set("inspecteurs", "inspecteur.rice.s");
// dictionary.set("instituteurs", "instituteur.rice.s");
// dictionary.set("intellectuels", "intellectuel.le.s");
// dictionary.set("lycéens", "lycéen.ne.s");
// dictionary.set("médiateurs", "médiateur.rice.s");
// dictionary.set("modérateurs", "modérateur.rice.s");
// dictionary.set("officiers", "officier.ère.s");
// dictionary.set("policiers", "policier.ère.s");
// dictionary.set("présidents", "président.e.s");
// dictionary.set("professeurs", "professeur.e.s");
// dictionary.set("professionnels", "professionnel.le.s");
// dictionary.set("programmeurs", "programmeur.euse.s");
// dictionary.set("recteurs", "recteur.rice.s");
// dictionary.set("remplaçants", "remplaçant.e.s");
// dictionary.set("retraités", "retraité.e.s");
// dictionary.set("sénateurs", "sénateur.rice.s");
// dictionary.set("séniors", "sénior.e.s");
// dictionary.set("sportifs", "sportif.ive.s");
// dictionary.set("suppléants", "suppléant.e.s");
// dictionary.set("techniciens", "technicien.ne.s");
// dictionary.set("territorials", "territorial.e.s");
// dictionary.set("transporteurs", "transporteur.euse.s");
// dictionary.set("travailleurs", "travailleur.euse.s");
// dictionary.set("usagers", "usager.ère.s");
// dictionary.set("développeurs", "développeur.euse.s");

let regexs = new Map();
for (let element of dictionaryIncl.keys()) {
<<<<<<< HEAD:src/content_scripts/inclusiveWriting.js
  regexs.set(element, new RegExp(element, "gi"));
=======
  regexs.set(element, new RegExp("\\b" + element + "\\b", "gi"));
>>>>>>> 1b5b6989fd10dec801e902b5f7ac882ae99548ff:src/inclusiveWriting.js
}

function replaceTextIncl(node) {
  if (node.nodeType === Node.TEXT_NODE) {
    if (node.parentNode && node.parentNode.nodeName === "TEXTAREA") {
      console.log("replaceTextIncl");
    }

    console.log("replaceTextIncl2")

    let content = node.textContent;

    for (let [element, inclWord] of dictionaryIncl) {
      let regex = regexs.get(element);

      content = content.replace(regex, inclWord);

    }

    node.textContent = content;
  } else {
    for (let i = 0; i < node.childNodes.length; i++) {
      replaceTextIncl(node.childNodes[i]);

    }
  }
}

replaceTextIncl(document.body);
console.log("inclusive2");

const observer = new MutationObserver((mutations) => {
  mutations.forEach((mutation) => {
    if (mutation.addedNodes && mutation.addedNodes.length > 0) {
      for (let i = 0; i < mutation.addedNodes.length; i++) {
        const newNode = mutation.addedNodes[i];
        replaceTextIncl(newNode);
      }
    }
  });
});
observer.observe(document.body, {
  childList: true,
  subtree: true,
});

console.log("inclusive3");
